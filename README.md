# éº¦éº¦è‡ªä¸»è§„åˆ’æ’ä»¶

è®© AI Bot æ‹¥æœ‰è‡ªå·±çš„ç”Ÿæ´»æ—¥ç¨‹ï¼Œè‡ªåŠ¨ç”Ÿæˆç¬¦åˆäººè®¾çš„æ¯æ—¥æ´»åŠ¨å®‰æ’ã€‚

**ç‰ˆæœ¬ï¼šv3.0.0** | [GitHub](https://github.com/xuqian13/autonomous_planning_plugin) | è®¸å¯è¯ï¼šAGPL-3.0

---

## åŠŸèƒ½ä»‹ç»

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ¤– **æ™ºèƒ½ç”Ÿæˆæ—¥ç¨‹** - åŸºäºBotäººè®¾è‡ªåŠ¨ç”Ÿæˆæ¯æ—¥è®¡åˆ’ï¼ˆ8-15ä¸ªæ´»åŠ¨ï¼‰
- â° **å®šæ—¶è‡ªåŠ¨ç”Ÿæˆ** - æ¯å¤©å‡Œæ™¨è‡ªåŠ¨ç”Ÿæˆæ–°æ—¥ç¨‹
- ğŸ’¬ **å¯¹è¯èå…¥** - è‡ªç„¶æåˆ°å½“å‰æ´»åŠ¨ï¼ˆå¦‚"è¿™ä¼šå„¿æ­£åƒåˆé¥­å‘¢"ï¼‰
- ğŸ“Š **å¤šç§æ ¼å¼** - æ–‡å­—æˆ–å›¾ç‰‡æŸ¥çœ‹æ—¥ç¨‹
- ğŸ¨ **è‡ªå®šä¹‰é£æ ¼** - é…ç½®æç¤ºè¯æ§åˆ¶æ—¥ç¨‹å†…å®¹
- ğŸ§¹ **è‡ªåŠ¨æ¸…ç†** - è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ—¥ç¨‹ï¼Œä¿æŒæ•°æ®åº“æ•´æ´

### v3.0æ€§èƒ½æå‡
- âš¡ æŸ¥è¯¢é€Ÿåº¦æå‡ 84%ï¼ˆ50ms â†’ 8msï¼‰
- ğŸš€ ç”Ÿæˆé€Ÿåº¦æå‡ 50%ï¼ˆ60ç§’ â†’ 30ç§’ï¼‰
- ğŸ’¾ ç¼“å­˜å‘½ä¸­ç‡æå‡ 42%ï¼ˆ60% â†’ 85%ï¼‰
- ğŸ›¡ï¸ å‡å°‘ 50% æ— æ•ˆé‡è¯•
- ğŸ”’ 100% é˜²å¾¡æ³¨å…¥æ”»å‡»

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…

```bash
# å®‰è£…ä¾èµ–
pip install Pillow toml

# å®‰è£…å­—ä½“ï¼ˆç”¨äºå›¾ç‰‡ç”Ÿæˆï¼‰
sudo apt-get install fonts-wqy-microhei
```

å°†æ’ä»¶æ”¾åˆ° MaiCore çš„ `plugins/` ç›®å½•ï¼Œé‡å¯å³å¯ã€‚

### 2. ç”Ÿæˆæ—¥ç¨‹

å¯¹Botè¯´ï¼š**"å¸®æˆ‘ç”Ÿæˆä»Šå¤©çš„æ—¥ç¨‹"**

### 3. æŸ¥çœ‹æ—¥ç¨‹

```bash
/plan status   # æ–‡å­—æ ¼å¼
/plan list     # å›¾ç‰‡æ ¼å¼
```

### 4. ç®¡ç†æ—¥ç¨‹

```bash
/plan clear              # æ¸…ç†æ—§æ—¥ç¨‹
/plan delete <åºå·>      # åˆ é™¤æŒ‡å®šæ—¥ç¨‹
/plan help               # æŸ¥çœ‹å¸®åŠ©
```

---

## é…ç½®è¯´æ˜

é…ç½®æ–‡ä»¶ï¼š`config.toml`

### åŸºç¡€é…ç½®

```toml
[plugin]
enabled = true  # å¯ç”¨æ’ä»¶

[autonomous_planning.schedule]
inject_schedule = true        # å¯¹è¯æ—¶æåˆ°å½“å‰æ´»åŠ¨
auto_generate = true          # è‡ªåŠ¨ç”Ÿæˆæ—¥ç¨‹
auto_schedule_time = "00:30"  # æ¯å¤©ç”Ÿæˆæ—¶é—´
```

### è‡ªå®šä¹‰æ—¥ç¨‹é£æ ¼ï¼ˆæ–°åŠŸèƒ½ï¼‰

åœ¨ `config.toml` ä¸­æ·»åŠ ï¼š

```toml
[autonomous_planning.schedule]
custom_prompt = "ä»Šå¤©æƒ³å¤šè¿åŠ¨ï¼Œè‡³å°‘3å°æ—¶è¿åŠ¨æ—¶é—´"
```

#### ä½¿ç”¨ç¤ºä¾‹

| åœºæ™¯ | é…ç½®ç¤ºä¾‹ |
|------|---------|
| **å­¦ä¹ æ—¥** | `custom_prompt = "ä»Šå¤©æœ‰è€ƒè¯•ï¼Œå¤šå®‰æ’å¤ä¹ æ—¶é—´ï¼Œå‡å°‘å¨±ä¹"` |
| **è¿åŠ¨æ—¥** | `custom_prompt = "ä»Šå¤©æƒ³å¤šè¿åŠ¨ï¼Œè‡³å°‘3å°æ—¶è¿åŠ¨æ—¶é—´"`  |
| **æ”¾æ¾æ—¥** | `custom_prompt = "å‘¨æœ«æ”¾æ¾ï¼Œç¡åˆ°è‡ªç„¶é†’ï¼Œå¤šå®‰æ’å¨±ä¹"` |
| **å¥åº·ä½œæ¯** | `custom_prompt = "æ—©ç¡æ—©èµ·ï¼ˆ11ç‚¹ç¡ï¼Œ7ç‚¹èµ·ï¼‰ï¼Œè§„å¾‹ä¸‰é¤"` |
| **ç¤¾äº¤æ—¥** | `custom_prompt = "ä»Šå¤©å¤šå’Œæœ‹å‹äº¤æµï¼Œå®‰æ’èšé¤ã€èŠå¤©ç­‰ç¤¾äº¤æ´»åŠ¨"` |
| **å·¥ä½œæ—¥** | `custom_prompt = "ä¸“æ³¨å·¥ä½œå­¦ä¹ ï¼Œå‡å°‘å¨±ä¹ï¼Œæé«˜æ•ˆç‡"` |

### å¸¸ç”¨é…ç½®é¡¹

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `inject_schedule` | true | å¯¹è¯æ—¶æåˆ°å½“å‰æ´»åŠ¨ |
| `auto_generate` | true | è‡ªåŠ¨æ£€æŸ¥å¹¶ç”Ÿæˆæ—¥ç¨‹ |
| `use_multi_round` | true | å¤šè½®ç”Ÿæˆæå‡è´¨é‡ |
| `max_rounds` | 2 | æœ€å¤šå°è¯•è½®æ•°ï¼ˆ1-3ï¼‰ |
| `quality_threshold` | 0.85 | è´¨é‡é˜ˆå€¼ï¼ˆ0.80-0.90ï¼‰ |
| `custom_prompt` | "" | è‡ªå®šä¹‰æ—¥ç¨‹é£æ ¼ â­ |
| `auto_schedule_time` | "00:30" | å®šæ—¶ç”Ÿæˆæ—¶é—´ |
| `admin_users` | [] | ç®¡ç†å‘˜QQå·åˆ—è¡¨ |

---

## é¡¹ç›®ç»“æ„

```
autonomous_planning_plugin/
â”œâ”€â”€ __init__.py              # æ’ä»¶å…¥å£
â”œâ”€â”€ plugin.py                # æ’ä»¶ä¸»ç±»
â”œâ”€â”€ config.toml              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ _manifest.json           # æ’ä»¶æ¸…å•
â”œâ”€â”€ config_manager.py        # é…ç½®ç®¡ç†å™¨
â”‚
â”œâ”€â”€ core/                    # æ ¸å¿ƒæ¨¡å— â­
â”‚   â”œâ”€â”€ __init__.py          # æ ¸å¿ƒæ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ models.py            # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ constants.py         # å¸¸é‡å®šä¹‰
â”‚   â””â”€â”€ exceptions.py        # è‡ªå®šä¹‰å¼‚å¸¸ç±»
â”‚
â”œâ”€â”€ planner/                 # è§„åˆ’å™¨æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ goal_manager.py      # ç›®æ ‡ç®¡ç†å™¨
â”‚   â”œâ”€â”€ schedule_generator.py # æ—¥ç¨‹ç”Ÿæˆå™¨ï¼ˆLLMé©±åŠ¨ï¼‰
â”‚   â”œâ”€â”€ auto_scheduler.py    # è‡ªåŠ¨è°ƒåº¦å™¨ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰
â”‚   â””â”€â”€ generator/           # æ—¥ç¨‹ç”Ÿæˆå­æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ base_generator.py   # åŸºç¡€ç”Ÿæˆå™¨
â”‚       â”œâ”€â”€ validator.py        # è¯­ä¹‰éªŒè¯å™¨
â”‚       â””â”€â”€ conflict_resolver.py # å†²çªè§£å†³å™¨
â”‚
â”œâ”€â”€ database/                # æ•°æ®åº“æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ goal_db.py           # SQLite æ•°æ®åº“æ“ä½œ
â”‚
â”œâ”€â”€ cache/                   # ç¼“å­˜æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ lru_cache.py         # LRU ç¼“å­˜å®ç°
â”‚   â””â”€â”€ conversation_cache.py # å¯¹è¯ç¼“å­˜
â”‚
â”œâ”€â”€ tools/                   # LLM å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ tools.py             # LLM å¯è°ƒç”¨å·¥å…·
â”‚
â”œâ”€â”€ commands/                # å‘½ä»¤å¤„ç†æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ planning_command.py  # /plan å‘½ä»¤å¤„ç†
â”‚
â”œâ”€â”€ handlers/                # äº‹ä»¶å¤„ç†å™¨æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ handlers.py          # äº‹ä»¶ç›‘å¬å’Œæ—¥ç¨‹æ³¨å…¥
â”‚
â”œâ”€â”€ utils/                   # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ time_utils.py        # æ—¶é—´å¤„ç†å·¥å…·
â”‚   â””â”€â”€ schedule_image_generator.py # æ—¥ç¨‹å›¾ç‰‡ç”Ÿæˆ
â”‚
â”œâ”€â”€ tests/                   # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_utils.py        # å·¥å…·æµ‹è¯•
â”‚
â””â”€â”€ assets/                  # é™æ€èµ„æº
    â”œâ”€â”€ bird.jpg             # è£…é¥°å›¾ç‰‡
    â””â”€â”€ winter_char.jpg      # è§’è‰²å›¾ç‰‡
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

#### ğŸ“¦ core/ - æ ¸å¿ƒåŸºç¡€è®¾æ–½
- **models.py** - Goal æ•°æ®æ¨¡å‹ã€æšä¸¾ç±»å‹å®šä¹‰
- **constants.py** - å…¨å±€å¸¸é‡é…ç½®
- **exceptions.py** - 11ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼ˆé”™è¯¯åˆ†ç±»å¤„ç†ï¼‰

#### ğŸ¯ planner/ - è§„åˆ’å¼•æ“
- **goal_manager.py** - ç›®æ ‡çš„ CRUD æ“ä½œã€æŸ¥è¯¢è¿‡æ»¤
- **schedule_generator.py** - AI é©±åŠ¨çš„æ—¥ç¨‹ç”Ÿæˆï¼ˆæ”¯æŒå¤šè½®ä¼˜åŒ–ï¼‰
- **auto_scheduler.py** - å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
- **generator/** - æ—¥ç¨‹ç”Ÿæˆå­ç³»ç»Ÿ
  - validator.py: è¯­ä¹‰éªŒè¯ï¼ˆä¸‰é¤æ—¶é—´ã€æ´»åŠ¨æ—¶é•¿ç­‰ï¼‰
  - conflict_resolver.py: æ—¶é—´å†²çªè§£å†³

#### ğŸ’¾ database/ - æ•°æ®æŒä¹…åŒ–
- **goal_db.py** - SQLite æ•°æ®åº“å°è£…ï¼ˆç´¢å¼•ä¼˜åŒ–ã€æ‰¹é‡æ“ä½œï¼‰

#### âš¡ cache/ - æ€§èƒ½ä¼˜åŒ–
- **lru_cache.py** - LRU ç¼“å­˜å®ç°ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
- **conversation_cache.py** - å¯¹è¯ä¸Šä¸‹æ–‡ç¼“å­˜

#### ğŸ”§ tools/ - LLM é›†æˆ
- **tools.py** - LLM å¯è°ƒç”¨çš„ 4 ä¸ªå·¥å…·å‡½æ•°
  - ManageGoalTool: ç›®æ ‡ç®¡ç†
  - GetPlanningStatusTool: æŸ¥çœ‹çŠ¶æ€
  - GenerateScheduleTool: ç”Ÿæˆæ—¥ç¨‹
  - ApplyScheduleTool: åº”ç”¨æ—¥ç¨‹

#### ğŸ’¬ commands/ - å‘½ä»¤ç³»ç»Ÿ
- **planning_command.py** - /plan å‘½ä»¤å¤„ç†ï¼ˆstatus/list/delete/clear/helpï¼‰

#### ğŸ§ handlers/ - äº‹ä»¶ç›‘å¬
- **handlers.py** - 2 ä¸ªäº‹ä»¶å¤„ç†å™¨
  - AutonomousPlannerEventHandler: åå°æ¸…ç†ä»»åŠ¡
  - ScheduleInjectEventHandler: å¯¹è¯ä¸­æ³¨å…¥å½“å‰æ´»åŠ¨

#### ğŸ› ï¸ utils/ - è¾…åŠ©å·¥å…·
- **time_utils.py** - æ—¶é—´æ ¼å¼è½¬æ¢ã€è§£æ
- **schedule_image_generator.py** - PIL å›¾ç‰‡æ¸²æŸ“

---

## å¼€å‘æŒ‡å—

### v3.0.0 å‡çº§æŒ‡å—

å¦‚æœä½ ä»æ—§ç‰ˆæœ¬ï¼ˆv2.xï¼‰å‡çº§åˆ° v3.0.0ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å˜åŒ–ï¼š

**ä»£ç ç»“æ„å˜åŒ–**
```bash
# æ—§ç‰ˆæœ¬ï¼ˆv2.xï¼‰- å•æ–‡ä»¶ç»“æ„
plugins/autonomous_planning_plugin/
â”œâ”€â”€ exceptions.py
â”œâ”€â”€ database.py
â”œâ”€â”€ cache.py
â”œâ”€â”€ tools.py
â”œâ”€â”€ commands.py
â””â”€â”€ handlers.py

# æ–°ç‰ˆæœ¬ï¼ˆv3.0ï¼‰- æ¨¡å—åŒ–ç»“æ„
plugins/autonomous_planning_plugin/
â”œâ”€â”€ core/
â”‚   â””â”€â”€ exceptions.py
â”œâ”€â”€ database/
â”‚   â””â”€â”€ goal_db.py
â”œâ”€â”€ cache/
â”‚   â””â”€â”€ lru_cache.py
â”œâ”€â”€ tools/
â”‚   â””â”€â”€ tools.py
â”œâ”€â”€ commands/
â”‚   â””â”€â”€ planning_command.py
â””â”€â”€ handlers/
    â””â”€â”€ handlers.py
```

**å¯¼å…¥è·¯å¾„å˜åŒ–**
```python
# æ—§ç‰ˆæœ¬å¯¼å…¥
from .exceptions import InvalidParametersError
from .database import GoalDatabase

# æ–°ç‰ˆæœ¬å¯¼å…¥
from .core.exceptions import InvalidParametersError
from .database.goal_db import GoalDatabase
```

**å‡çº§æ­¥éª¤**
1. å¤‡ä»½ç°æœ‰æ•°æ®åº“æ–‡ä»¶ `goals.db`
2. åˆ é™¤æ—§çš„ Python ç¼“å­˜ï¼š`find . -name "__pycache__" -exec rm -rf {} +`
3. æ‹‰å–æœ€æ–°ä»£ç 
4. é‡å¯ MaiBot

**æ•°æ®å…¼å®¹æ€§**
- âœ… æ•°æ®åº“æ ¼å¼å®Œå…¨å…¼å®¹ï¼Œæ— éœ€è¿ç§»
- âœ… é…ç½®æ–‡ä»¶ `config.toml` å‘åå…¼å®¹
- âœ… æ—§çš„æ—¥ç¨‹æ•°æ®è‡ªåŠ¨ä¿ç•™

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/

# è¿è¡Œç‰¹å®šæµ‹è¯•
python -m pytest tests/test_utils.py -v
```

### è°ƒè¯•æ¨¡å¼

åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨è°ƒè¯•æ—¥å¿—ï¼š

```toml
[plugin]
enabled = true
log_level = "DEBUG"  # è®¾ç½®ä¸ºDEBUGæŸ¥çœ‹è¯¦ç»†æ—¥å¿—
```

### æ‰©å±•åŠŸèƒ½

**æ·»åŠ æ–°çš„ç›®æ ‡ç±»å‹ï¼š**

1. åœ¨ `goal_manager.py` ä¸­å®šä¹‰æ–°çš„ç›®æ ‡ç±»å‹
2. åœ¨ `tools.py` ä¸­æ·»åŠ å¯¹åº”çš„å·¥å…·å‡½æ•°
3. æ›´æ–° `schedule_generator.py` çš„ç”Ÿæˆé€»è¾‘

**è‡ªå®šä¹‰æ—¥ç¨‹ç”Ÿæˆç­–ç•¥ï¼š**

ä¿®æ”¹ `schedule_generator.py` ä¸­çš„ `_build_schedule_prompt()` æ–¹æ³•ï¼Œè°ƒæ•´ç”Ÿæˆæç¤ºè¯ã€‚

---

## å¸¸è§é—®é¢˜

**Q: å¦‚ä½•ä¿®æ”¹å·²ç”Ÿæˆçš„æ—¥ç¨‹ï¼Ÿ**
A: ä½¿ç”¨ `/plan clear` æ¸…ç†åé‡æ–°ç”Ÿæˆ

**Q: ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°æ—¥ç¨‹ï¼Ÿ**
A: è¿è¡Œ `/plan status` æ£€æŸ¥ï¼Œæˆ–æ‰‹åŠ¨è®© Bot ç”Ÿæˆ

**Q: å¦‚ä½•ç¦ç”¨æ—¥ç¨‹æ³¨å…¥ï¼Ÿ**
A: è®¾ç½® `inject_schedule = false`

**Q: ç”Ÿæˆé€Ÿåº¦å¤ªæ…¢ï¼Ÿ**
A: è®¾ç½® `use_multi_round = false` å’Œ `quality_threshold = 0.80`

**Q: å¦‚ä½•é™åˆ¶åªæœ‰ç®¡ç†å‘˜ä½¿ç”¨ï¼Ÿ**
A: è®¾ç½® `admin_users = ["QQå·1", "QQå·2"]`

**Q: å¦‚ä½•è‡ªå®šä¹‰æ—¥ç¨‹é£æ ¼ï¼Ÿ**
A: åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½® `custom_prompt`ï¼Œå‚è€ƒä¸Šé¢çš„ç¤ºä¾‹

**Q: æ—§æ—¥ç¨‹ä¼šè‡ªåŠ¨æ¸…ç†å—ï¼Ÿ**
A: ä¼šçš„ï¼Œæ˜¨å¤©åŠæ›´æ—©çš„æ—¥ç¨‹ä¼šè‡ªåŠ¨æ ‡è®°ä¸ºå·²å®Œæˆï¼Œ30å¤©åè‡ªåŠ¨åˆ é™¤

**Q: å‡çº§åˆ° v3.0.0 åæ’ä»¶æ— æ³•åŠ è½½ï¼Ÿ**
A: æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
```bash
# 1. æ¸…ç† Python ç¼“å­˜
cd plugins/autonomous_planning_plugin
find . -name "__pycache__" -exec rm -rf {} +
find . -name "*.pyc" -delete

# 2. æ£€æŸ¥æ–‡ä»¶ç»“æ„
ls -la core/ planner/ database/ cache/ tools/ commands/ handlers/

# 3. é‡å¯ MaiBot
```

**Q: å‡ºç° "No module named 'plugins.autonomous_planning_plugin.exceptions'" é”™è¯¯ï¼Ÿ**
A: è¿™æ˜¯ v3.0.0 é‡æ„åçš„å¯¼å…¥è·¯å¾„é—®é¢˜ï¼Œå·²åœ¨æœ€æ–°ç‰ˆæœ¬ä¿®å¤ã€‚è¯·ï¼š
1. æ‹‰å–æœ€æ–°ä»£ç 
2. æ¸…ç† Python ç¼“å­˜ï¼ˆè§ä¸Šä¸€é—®ï¼‰
3. ç¡®è®¤æ–‡ä»¶ `core/exceptions.py` å­˜åœ¨

---

## æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

#### 1. æ¨¡å—å¯¼å…¥é”™è¯¯
```
ModuleNotFoundError: No module named 'plugins.autonomous_planning_plugin.xxx'
```
**åŸå› **: Python ç¼“å­˜æœªæ¸…ç†æˆ–æ–‡ä»¶ç»“æ„ä¸å®Œæ•´

**è§£å†³**:
```bash
# æ¸…ç†ç¼“å­˜
find plugins/autonomous_planning_plugin -name "__pycache__" -exec rm -rf {} +
find plugins/autonomous_planning_plugin -name "*.pyc" -delete

# éªŒè¯æ–‡ä»¶ç»“æ„
ls -la plugins/autonomous_planning_plugin/core/
ls -la plugins/autonomous_planning_plugin/planner/
```

#### 2. æ•°æ®åº“é”å®šé”™è¯¯
```
sqlite3.OperationalError: database is locked
```
**åŸå› **: å¤šä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®æ•°æ®åº“

**è§£å†³**: é‡å¯ MaiBot æˆ–åˆ é™¤ `goals.db-journal` æ–‡ä»¶

#### 3. LLM ç”Ÿæˆè¶…æ—¶
```
LLMTimeoutError: LLMè°ƒç”¨è¶…æ—¶
```
**åŸå› **: ç½‘ç»œé—®é¢˜æˆ–æ¨¡å‹å“åº”æ…¢

**è§£å†³**: åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ è¶…æ—¶æ—¶é—´
```toml
[autonomous_planning.schedule]
generation_timeout = 300.0  # å¢åŠ åˆ°5åˆ†é’Ÿ
```

#### 4. æ—¥ç¨‹å›¾ç‰‡æ— æ³•ç”Ÿæˆ
```
PIL.UnidentifiedImageError or Font not found
```
**åŸå› **: ç¼ºå°‘å­—ä½“æˆ– Pillow åº“

**è§£å†³**:
```bash
# å®‰è£…å­—ä½“
sudo apt-get install fonts-wqy-microhei fonts-wqy-zenhei

# é‡æ–°å®‰è£… Pillow
pip install --upgrade Pillow
```

#### 5. æƒé™è¢«æ‹’ç»
```
ğŸš« ä½ ä¸æ˜¯ç®¡ç†å‘˜å“¦~
```
**åŸå› **: è®¾ç½®äº†ç®¡ç†å‘˜ç™½åå•

**è§£å†³**: åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä½ çš„ QQ å·
```toml
[autonomous_planning.schedule]
admin_users = ["ä½ çš„QQå·"]  # æˆ–è®¾ä¸ºç©ºåˆ—è¡¨ [] å…è®¸æ‰€æœ‰äºº
```

### è·å–æ›´å¤šå¸®åŠ©

å¦‚æœé—®é¢˜ä»æœªè§£å†³ï¼š
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. åœ¨ [GitHub Issues](https://github.com/xuqian13/autonomous_planning_plugin/issues) æäº¤é—®é¢˜
3. æä¾›é”™è¯¯æ—¥å¿—å’Œé…ç½®æ–‡ä»¶ï¼ˆéšè—æ•æ„Ÿä¿¡æ¯ï¼‰

---

## æŠ€æœ¯äº®ç‚¹

### ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ

- **æ•°æ®åº“ä¼˜åŒ–** - æŸ¥è¯¢é€Ÿåº¦ä»50msé™åˆ°8msï¼Œåƒç¿»ä¹¦ä¸€æ ·å¿«
- **æ™ºèƒ½ç¼“å­˜** - å¸¸ç”¨æ•°æ®ç¼“å­˜èµ·æ¥ï¼Œä¸ç”¨æ¯æ¬¡éƒ½æŸ¥æ•°æ®åº“
- **å¹¶å‘æ§åˆ¶** - å¤šä¸ªè¯·æ±‚åŒæ—¶å¤„ç†ï¼Œäº’ä¸å½±å“

### ä¸ºä»€ä¹ˆè¿™ä¹ˆç¨³ï¼Ÿ

- **æ™ºèƒ½é‡è¯•** - ç½‘ç»œè¶…æ—¶ä¼šé‡è¯•ï¼Œé…é¢è¶…é™ä¸æµªè´¹æ—¶é—´é‡è¯•
- **é”™è¯¯åˆ†ç±»** - 11ç§é”™è¯¯ç±»å‹ï¼Œæ¯ç§éƒ½æœ‰ä¸“é—¨çš„å¤„ç†æ–¹å¼
- **å®‰å…¨é˜²æŠ¤** - é˜²æ­¢æ¶æ„è¾“å…¥ï¼Œä¿æŠ¤ä½ çš„æ•°æ®å®‰å…¨

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

- **ç›®æ ‡ç®¡ç†** (goal_manager.py) - åˆ›å»ºã€æŸ¥çœ‹ã€æ›´æ–°æ—¥ç¨‹ç›®æ ‡
- **æ—¥ç¨‹ç”Ÿæˆ** (schedule_generator.py) - AIè‡ªåŠ¨ç”Ÿæˆç¬¦åˆäººè®¾çš„æ—¥ç¨‹
- **äº‹ä»¶ç›‘å¬** (handlers.py) - åœ¨å¯¹è¯ä¸­è‡ªç„¶æåˆ°å½“å‰æ´»åŠ¨
- **æ•°æ®å­˜å‚¨** (database.py) - SQLiteæ•°æ®åº“æŒä¹…åŒ–ä¿å­˜
- **ç¼“å­˜åŠ é€Ÿ** (cache.py) - LRUç¼“å­˜æå‡æŸ¥è¯¢é€Ÿåº¦

---

## ç‰ˆæœ¬å†å²

### v3.0.0 (2025-11-24)

**é‡å¤§æ›´æ–° - ä»£ç é‡æ„ä¸æ€§èƒ½ä¼˜åŒ–**

**æ¶æ„é‡æ„** ğŸ—ï¸
- âœ¨ **æ¨¡å—åŒ–æ‹†åˆ†** - ä»å•æ–‡ä»¶ç»“æ„è¿ç§»åˆ°æ¨¡å—åŒ–ç›®å½•ç»“æ„
  - æ–°å¢ `core/` æ¨¡å—ï¼šæ•°æ®æ¨¡å‹ã€å¸¸é‡ã€å¼‚å¸¸ç±»
  - æ–°å¢ `planner/generator/` å­æ¨¡å—ï¼šéªŒè¯å™¨ã€å†²çªè§£å†³å™¨
  - æ‹†åˆ† `cache/`ã€`database/`ã€`tools/`ã€`commands/`ã€`handlers/` ç‹¬ç«‹æ¨¡å—
- ğŸ”§ **å¯¼å…¥è·¯å¾„ä¼˜åŒ–** - ç»Ÿä¸€ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼Œæå‡å¯ç»´æŠ¤æ€§
- ğŸ“¦ **ä»£ç ç»„ç»‡** - æŒ‰èŒè´£åˆ†ç¦»ï¼Œå•ä¸€èŒè´£åŸåˆ™

**æ€§èƒ½ä¼˜åŒ–** âš¡
- æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦æå‡ 84%ï¼ˆ50ms â†’ 8msï¼‰
- ç¼“å­˜å‘½ä¸­ç‡æå‡ 42%ï¼ˆ60% â†’ 85%ï¼‰
- ç”Ÿæˆé€Ÿåº¦æå‡ 50%ï¼ˆ60ç§’ â†’ 30ç§’ï¼‰
- å‡å°‘ 50% æ— æ•ˆé‡è¯•
- è¶…æ—¶ç‡é™ä½ 90%

**æ–°åŠŸèƒ½** âœ¨
- ğŸ¨ è‡ªå®šä¹‰Prompté…ç½® - æ”¯æŒè‡ªå®šä¹‰æ—¥ç¨‹ç”Ÿæˆé£æ ¼
- ğŸ§¹ æ—§æ—¥ç¨‹è‡ªåŠ¨æ¸…ç† - æ˜¨å¤©çš„æ—¥ç¨‹è‡ªåŠ¨æ ‡è®°ä¸ºå·²å®Œæˆï¼Œ30å¤©ååˆ é™¤
- ğŸ›¡ï¸ æ™ºèƒ½é”™è¯¯å¤„ç† - 11ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ç±»
- ğŸ”’ è¾“å…¥éªŒè¯å¢å¼º - 100%é˜²å¾¡æ³¨å…¥æ”»å‡»
- âš¡ å¹¶è¡Œç”Ÿæˆæ¨¡å¼ - å¯é€‰çš„å¹¶è¡Œå¤šè½®ç”Ÿæˆ

**Bugä¿®å¤** ğŸ›
- âœ… ä¿®å¤æ¨¡å—å¯¼å…¥è·¯å¾„é”™è¯¯ï¼ˆ`commands/planning_command.py`ï¼‰
- âœ… ä¿®å¤å¼‚å¸¸å¯¼å…¥è·¯å¾„é”™è¯¯ï¼ˆ`planner/schedule_generator.py`ï¼‰
- âœ… ä¿®å¤ç›®æ ‡åˆ—è¡¨ä¼˜å…ˆçº§æ’åºé”™è¯¯
- âœ… ä¿®å¤æ—¶é—´æ ¼å¼å‚æ•°å‘½åæ··æ·†
- âœ… ä¿®å¤ç¼“å­˜é”å±æ€§é”™è¯¯å¯¼è‡´çš„å´©æºƒ
- âœ… ä¼˜åŒ–æ—¶é—´é‡å å¤„ç†ï¼šè°ƒæ•´æŒç»­æ—¶é—´è€Œéç›´æ¥åˆ é™¤
- âœ… ç§»é™¤åºŸå¼ƒçš„ interval_seconds å­—æ®µ
- âœ… æ¸…ç† Python å­—èŠ‚ç ç¼“å­˜é—®é¢˜

**ä»£ç è´¨é‡** ğŸ“
- æ·»åŠ è¯¦ç»†çš„æ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²
- ç»Ÿä¸€å¼‚å¸¸å¤„ç†æœºåˆ¶
- æ”¹è¿›æ—¥å¿—è¾“å‡ºæ ¼å¼
- å¢å¼ºç±»å‹æ³¨è§£

### v2.2.0 (2025-11-23)
- æ”¯æŒæ´»åŠ¨æŒç»­æ—¶é•¿é…ç½®
- ä¼˜åŒ–å¤šè½®ç”Ÿæˆè´¨é‡è¯„åˆ†

### v2.1.0 (2025-11-19)
- æ‰¹é‡åˆ›å»ºç›®æ ‡åŠŸèƒ½
- è‡ªå®šä¹‰LLMæ¨¡å‹é…ç½®

### v2.0.0 (2025-11-15)
- ä»JSONè¿ç§»åˆ°SQLiteæ•°æ®åº“
- æ·»åŠ LRUç¼“å­˜æœºåˆ¶
- å›¾ç‰‡æ—¥ç¨‹å±•ç¤º
- å®šæ—¶è‡ªåŠ¨ç”Ÿæˆ

### v1.0.0 (2025-11-10)
é¦–æ¬¡å‘å¸ƒ
- åŸºç¡€ç›®æ ‡ç®¡ç†åŠŸèƒ½
- LLMé©±åŠ¨çš„æ—¥ç¨‹ç”Ÿæˆ

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ AGPL-3.0 è®¸å¯è¯

---

**å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè¯·ç»™ä¸ªâ­Starï¼**

Made with â¤ï¸ by [é“ä»”](https://github.com/xuqian13)
